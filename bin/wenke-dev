#!/usr/bin/env node

let wenkeDev = require('..');
let utils = require('../lib/utils');

let program = require('commander');

program.version(require('../package').version);

program.usage('[dir] [options]')
    .option('-s, --static-files-directory [static files directory]', 'static files directory')
    .option('-w, --webapp-directory [webapp directory]', 'webapp directory')
    .option('-d, --debug-domain [debug domain]', 'debug domain')
    .option('--hot-port, --hot-port [react-hot-loader server\'s port]', 'react-hot-loader server\' port')
    .option('-livereload-port, --livereload-port [livereload\'s port]', 'livereload\'s port')
    .option('--norefresh [don\'t auto refresh]', 'norefresh')
    .option('--eval [use eval]', 'use eval')
    .option('--express [build express project]', 'build express project')
    .option('--https [build https]', 'build https')
    .option('-https-livereload-port, --https-livereload-port [https livereload port]', 'https livereload port')
    .option('--preact [use preact]', 'use preact')
    .option('--vuehot [use vuehot]', 'use vuehot')
    .option('--disable-update [ disable force update]', ' disable force update');



program.parse(process.argv);

let disableUpdate = utils.hasArgument(process.argv, '--disable-update');
if(disableUpdate) {
    wenkeDev(program);
} else {
    utils.verifyVersion(function () {
        wenkeDev(program);
    }, function () {
        process.exit(-1);
    });
}





